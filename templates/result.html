{% extends "base.html" %}

{% block title %}ê´€ìƒ í’€ì´ ê²°ê³¼ - AI ê´€ìƒê°€{% endblock %}

{% block content %}
    {% if result and result.face_detected %}
    <div class="result-container">
        <h1 class="result-title">ğŸ”® ë‹¹ì‹ ì˜ ê´€ìƒ ìš´ëª… í’€ì´ ğŸ”®</h1>
        
        <!-- ì „ì²´ì ì¸ ì„±ê²© ë¶„ì„ -->
        <div class="fortune-section personality-section">
            <h2>âœ¨ ì„±ê²© ë° ê¸°ì§ˆ</h2>
            <div class="fortune-content">
                <p class="main-reading">{{ result.fortune.overall }}</p>
            </div>
        </div>

        <!-- ìš´ì„¸ ë¶„ì„ -->
        <div class="fortune-section fortune-main">
            <h2>ğŸŒŸ ì „ì²´ ìš´ì„¸</h2>
            <div class="fortune-content">
                <p class="main-reading">{{ result.fortune.fortune }}</p>
            </div>
        </div>

        <!-- ì§ì—…ìš´ -->
        <div class="fortune-section career-section">
            <h2>ğŸ’¼ ì§ì—… ë° ì‚¬ì—…ìš´</h2>
            <div class="fortune-content">
                <p class="main-reading">{{ result.fortune.career }}</p>
            </div>
        </div>

        <!-- ê±´ê°•ìš´ -->
        <div class="fortune-section health-section">
            <h2>ğŸ¥ ê±´ê°•ìš´</h2>
            <div class="fortune-content">
                <p class="main-reading">{{ result.fortune.health }}</p>
            </div>
        </div>

        <!-- ì§€í˜œìš´ -->
        <div class="fortune-section wisdom-section">
            <h2>ğŸ§  ì§€í˜œ ë° í•™ì—…ìš´</h2>
            <div class="fortune-content">
                <p class="main-reading">{{ result.fortune.wisdom }}</p>
            </div>
        </div>

        <!-- í–‰ìš´ì˜ ìš”ì†Œë“¤ -->
        <div class="fortune-section lucky-section">
            <h2>ğŸ€ í–‰ìš´ì˜ ìš”ì†Œë“¤</h2>
            <div class="fortune-content">
                <div class="lucky-grid">
                    <div class="lucky-item">
                        <span class="lucky-label">í–‰ìš´ì˜ ìƒ‰ìƒ:</span>
                        <span class="lucky-value">{{ result.fortune.lucky_elements.color }}</span>
                    </div>
                    <div class="lucky-item">
                        <span class="lucky-label">í–‰ìš´ì˜ ë°©í–¥:</span>
                        <span class="lucky-value">{{ result.fortune.lucky_elements.direction }}</span>
                    </div>
                    <div class="lucky-item">
                        <span class="lucky-label">í–‰ìš´ì˜ ìˆ«ì:</span>
                        <span class="lucky-value">{{ result.fortune.lucky_elements.number }}</span>
                    </div>
                    <div class="lucky-item">
                        <span class="lucky-label">í–‰ìš´ì˜ ë³´ì„:</span>
                        <span class="lucky-value">{{ result.fortune.lucky_elements.stone }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì¸ìƒ ì¡°ì–¸ -->
        <div class="fortune-section advice-section">
            <h2>ğŸ’¡ ì¸ìƒ ì¡°ì–¸</h2>
            <div class="fortune-content">
                <ul class="advice-list">
                    {% for advice in result.fortune.advice %}
                    <li class="advice-item">{{ advice }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- ì–¼êµ´ ë¶„ì„ ì •ë³´ -->
        <div class="fortune-section analysis-section">
            <h2>ğŸ“Š ì–¼êµ´ ë¶„ì„ ì •ë³´</h2>
            <div class="fortune-content">
                <div class="analysis-grid">
                    <div class="analysis-item">
                        <span class="analysis-label">ì–¼êµ´í˜•:</span>
                        <span class="analysis-value">{{ result.analysis.face_shape }}</span>
                    </div>
                    <div class="analysis-item">
                        <span class="analysis-label">ì–¼êµ´ í¬ê¸°:</span>
                        <span class="analysis-value">{{ result.analysis.face_size }}</span>
                    </div>
                    <div class="analysis-item">
                        <span class="analysis-label">ì–¼êµ´ ë¹„ìœ¨:</span>
                        <span class="analysis-value">{{ result.analysis.face_ratio }}</span>
                    </div>
                    <div class="analysis-item">
                        <span class="analysis-label">ì´ë§ˆ ë¹„ìœ¨:</span>
                        <span class="analysis-value">{{ result.analysis.forehead_proportion }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <a href="{{ url_for('index') }}" class="btn btn-primary">ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</a>
            <button onclick="shareResult()" class="btn btn-secondary">ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
        </div>
    </div>
    {% else %}
    <div class="error-container">
        <h2>ğŸ˜” ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>
        <p>{{ result.message if result else 'ì˜¬ë°”ë¥´ì§€ ì•Šì€ ìš”ì²­ì…ë‹ˆë‹¤.' }}</p>
        <a href="{{ url_for('index') }}" class="btn btn-primary">ë‹¤ì‹œ ì‹œë„í•˜ê¸°</a>
    </div>
    {% endif %}
{% endblock %}

{% block scripts %}
<script>
    function shareResult() {
        if (navigator.share) {
            navigator.share({
                title: 'ê´€ìƒ ìš´ëª… í’€ì´ ê²°ê³¼',
                text: 'ë‚˜ì˜ ê´€ìƒ ìš´ëª…ì„ í™•ì¸í•´ë³´ì„¸ìš”!',
                url: window.location.href
            });
        } else {
            // í´ë°±: URL ë³µì‚¬
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('ê²°ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }
    }
</script>
{% endblock %}